<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Uber Driver Pro V6.0 (æœ€çµ‚ç‰ˆ)</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    /* === å…¨å±€è¨­å®š === */
    body { background-color: #050505; color: #e5e5e5; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; padding-bottom: 100px; }
    
    /* === å¡ç‰‡æ¨£å¼ === */
    .card {
        background-color: #111216;
        border: 1px solid #2a2d36;
        border-radius: 1rem;
        padding: 1rem;
        margin-bottom: 0.8rem;
        position: relative;
    }
    .card-glow {
        box-shadow: 0 0 15px rgba(99, 102, 241, 0.1);
        border-color: #4f46e5;
    }

    /* === è¼¸å…¥æ¡†å„ªåŒ– === */
    .input-field {
        background-color: #1a1c23;
        border: 1px solid #333;
        color: #fff;
        border-radius: 0.6rem;
        padding: 0.8rem; /* åŠ å¤§é»æ“Šç¯„åœ */
        width: 100%;
        font-size: 1rem;
        transition: 0.2s;
    }
    .input-field:focus { outline: none; border-color: #6366f1; background-color: #202229; }

    /* === æ—¥æœŸé¸æ“‡å™¨å„ªåŒ– (å…¨å€åŸŸé»æ“Š) === */
    input[type="date"] {
        position: relative;
    }
    input[type="date"]::-webkit-calendar-picker-indicator {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        color: transparent;
        background: transparent;
        cursor: pointer;
    }

    /* === æŒ‰éˆ• === */
    .btn { width: 100%; padding: 0.8rem; border-radius: 0.6rem; font-weight: 600; font-size: 1rem; display: flex; justify-content: center; align-items: center; gap: 0.5rem; transition: 0.2s; }
    .btn-primary { background-color: #4f46e5; color: white; }
    .btn-primary:active { background-color: #4338ca; transform: scale(0.98); }
    .btn-danger { background-color: #7f1d1d; color: #fca5a5; border: 1px solid #991b1b; }
    .btn-ghost { background-color: transparent; border: 1px solid #333; color: #9ca3af; }

    /* === ç¯©é¸æ¨™ç±¤ === */
    .tab-scroll { display: flex; gap: 0.5rem; overflow-x: auto; padding-bottom: 0.5rem; scrollbar-width: none; }
    .tab-btn {
        padding: 0.5rem 1rem; border-radius: 2rem; font-size: 0.9rem; color: #9ca3af; background: #1a1c23; border: 1px solid #333; white-space: nowrap;
    }
    .tab-btn.active { background-color: #e0e7ff; color: #312e81; font-weight: bold; border-color: #fff; }

    /* === æ­·å²åˆ—è¡¨ === */
    .history-item {
        background-color: #111216;
        border-bottom: 1px solid #222;
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        transition: background 0.2s;
    }
    .history-item:active { background-color: #1c1e24; }
    .history-item:last-child { border-bottom: none; }
    
    /* === æ•¸å€¼é¡¯ç¤º === */
    .stat-value { font-size: 1.25rem; font-weight: 700; color: #f3f4f6; }
    .stat-label { font-size: 0.75rem; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; }
</style>
</head>
<body class="max-w-md mx-auto p-3">

    <div class="flex justify-between items-center mb-4 px-1">
        <div class="flex items-center gap-2">
            <div class="w-2 h-6 bg-indigo-500 rounded-full"></div>
            <h1 class="text-xl font-bold text-white">Uber Driver <span class="text-indigo-400 text-sm font-normal">Pro</span></h1>
        </div>
        <button onclick="toggleSettings()" class="p-2 bg-[#1a1c23] rounded-full text-gray-400 border border-[#333]">
            âš™ï¸
        </button>
    </div>

    <div id="settingsPanel" class="hidden mb-4 card border-indigo-900/50">
        <h3 class="text-indigo-400 font-bold mb-3 text-sm uppercase">å…¨åŸŸåƒæ•¸è¨­å®š</h3>
        <div class="grid grid-cols-2 gap-3 mb-3">
            <div>
                <label class="stat-label mb-1">æ²¹å“ç¨®é¡</label>
                <select id="oilType" class="input-field py-2" onchange="fetchOilPrice()">
                    <option value="92">92 ç„¡é‰›</option>
                    <option value="95">95 ç„¡é‰›</option>
                    <option value="98">98 ç„¡é‰›</option>
                    <option value="diesel">æŸ´æ²¹</option>
                </select>
            </div>
            <div>
                <label class="stat-label mb-1">ç›®å‰æ²¹åƒ¹</label>
                <div id="oilPriceDisplay" class="input-field py-2 text-yellow-400 font-bold" data-price="0">è®€å–ä¸­...</div>
            </div>
        </div>
        <div class="grid grid-cols-2 gap-3 mb-3">
            <div>
                <label class="stat-label mb-1">è»Šè¼›æ²¹è€— (km/L)</label>
                <input id="settingFuelRate" type="number" class="input-field py-2" placeholder="12" />
            </div>
            <div>
                <label class="stat-label mb-1">è€—ææˆæœ¬ ($/km)</label>
                <input id="settingMaint" type="number" step="0.1" class="input-field py-2" placeholder="1.5" />
            </div>
        </div>
        <button onclick="saveSettings()" class="btn btn-primary py-2 text-sm">å„²å­˜è¨­å®š (ä¸å½±éŸ¿èˆŠç´€éŒ„)</button>
    </div>

    <div class="card bg-gradient-to-br from-[#1e1b2e] to-[#111216] border-indigo-500/30 p-5 mb-4">
        <div class="flex justify-between items-start mb-4">
            <div>
                <label class="stat-label text-indigo-300">å€é–“ç¸½ç‡Ÿæ”¶</label>
                <div class="text-4xl font-bold text-white mt-1 tracking-tight">$<span id="dashTotalIncome">0</span></div>
            </div>
            <div class="text-right">
                <label class="stat-label text-green-400">å¯¦éš›æ·¨åˆ©</label>
                <div class="text-2xl font-bold text-green-400 mt-1">$<span id="dashNetProfit">0</span></div>
            </div>
        </div>
        
        <div class="grid grid-cols-3 gap-4 border-t border-white/10 pt-4">
            <div>
                <label class="stat-label">çœŸå¯¦æ™‚è–ª</label>
                <div class="stat-value text-indigo-400">$<span id="dashRealHourly">0</span></div>
            </div>
            <div class="text-center">
                <label class="stat-label">ç¸½å–®æ•¸</label>
                <div class="stat-value"><span id="dashOrders">0</span></div>
            </div>
            <div class="text-right">
                <label class="stat-label">ç¸½å·¥æ™‚</label>
                <div class="stat-value"><span id="dashHours">0</span><span class="text-sm font-normal text-gray-500 ml-0.5">h</span> <span id="dashMinutes">0</span><span class="text-sm font-normal text-gray-500 ml-0.5">m</span></div>
            </div>
        </div>
    </div>

    <div class="card card-glow mb-4" id="editorCard">
        <div class="flex justify-between items-center mb-3 pb-2 border-b border-gray-800">
            <h3 class="font-bold text-white flex items-center gap-2">
                <span id="editorModeIcon">ğŸ“</span> 
                <span id="editorTitle">æ–°å¢ç´€éŒ„</span>
            </h3>
            <span id="editorOilHint" class="text-xs text-gray-500 hidden">æ²¹åƒ¹é–å®š: $30.5</span>
        </div>

        <input type="hidden" id="editId" value="">
        <input type="hidden" id="recordOilPrice" value=""> <div class="mb-3">
            <label class="stat-label mb-1">æ—¥æœŸ</label>
            <input id="inputDate" type="date" class="input-field cursor-pointer" onclick="this.showPicker()" />
        </div>

        <div class="grid grid-cols-2 gap-3 mb-3">
            <div>
                <label class="stat-label mb-1">ç‡Ÿæ¥­é¡ ($)</label>
                <input id="inputIncome" type="number" inputmode="numeric" class="input-field text-yellow-400 font-bold" placeholder="0" />
            </div>
            <div>
                <label class="stat-label mb-1">å–®æ•¸</label>
                <input id="inputOrders" type="number" inputmode="numeric" class="input-field" placeholder="0" />
            </div>
        </div>

        <div class="grid grid-cols-2 gap-3 mb-4">
            <div>
                <label class="stat-label mb-1">é‡Œç¨‹ (KM)</label>
                <input id="inputDist" type="number" step="0.1" inputmode="decimal" class="input-field" placeholder="0" />
            </div>
            <div>
                <label class="stat-label mb-1">å·¥æ™‚ (æ™‚/åˆ†)</label>
                <div class="flex gap-2">
                    <input id="inputHr" type="number" class="input-field text-center" placeholder="æ™‚" />
                    <input id="inputMin" type="number" class="input-field text-center" placeholder="åˆ†" />
                </div>
            </div>
        </div>

        <div class="flex gap-2">
            <button onclick="saveRecord()" class="btn btn-primary" id="btnSave">
                <span>ğŸ’¾ å„²å­˜ç´€éŒ„</span>
            </button>
            <button onclick="deleteCurrentRecord()" class="btn btn-danger hidden" id="btnDelete">
                <span>ğŸ—‘ï¸ åˆªé™¤</span>
            </button>
            <button onclick="resetEditor()" class="btn btn-ghost hidden" id="btnCancel">
                å–æ¶ˆ
            </button>
        </div>
    </div>

    <div class="tab-scroll mb-3">
        <button class="tab-btn active" onclick="setFilter('day', this)">ä»Šæ—¥</button>
        <button class="tab-btn" onclick="setFilter('week', this)">æœ¬é€±</button>
        <button class="tab-btn" onclick="setFilter('month', this)">æœ¬æœˆ</button>
        <button class="tab-btn" onclick="setFilter('all', this)">å…¨éƒ¨ç´€éŒ„</button>
        <button class="tab-btn" onclick="toggleCharts()">ğŸ“Š åœ–è¡¨åˆ†æ</button>
    </div>

    <div id="chartsPanel" class="hidden card mb-4">
        <h4 class="text-xs text-gray-500 mb-2 uppercase">ç‡Ÿæ”¶è¶¨å‹¢</h4>
        <canvas id="mainChart" height="220"></canvas>
    </div>

    <div class="mb-20">
        <h3 class="text-xs font-bold text-gray-500 mb-2 uppercase pl-1">è©³ç´°æ˜ç´° (é»æ“Šç·¨è¼¯/åˆªé™¤)</h3>
        <div id="historyList" class="rounded-xl overflow-hidden border border-[#2a2d36]">
            </div>
    </div>

<script>
// === å…¨åŸŸè®Šæ•¸ ===
const workerAPI = "https://ubereat-oil-proxy.leo3026772.workers.dev/";
let globalOilPrice = 30.0;
let currentFilter = 'day';
let chartInstance = null;

// === åˆå§‹åŒ– ===
window.onload = async () => {
    resetEditor();
    loadSettings();
    refreshDashboard();
    await fetchOilPrice();
};

// === å·¥å…·ï¼šå–å¾—å°ç£ç•¶åœ°æ™‚é–“å­—ä¸² YYYY-MM-DD ===
function getLocalDateString() {
    const now = new Date();
    const offset = now.getTimezoneOffset() * 60000;
    return new Date(now.getTime() - offset).toISOString().split('T')[0];
}

// === è¨­å®šèˆ‡æ²¹åƒ¹ ===
function loadSettings() {
    document.getElementById('settingFuelRate').value = localStorage.getItem('fuelRate') || 12;
    document.getElementById('settingMaint').value = localStorage.getItem('maintCost') || 1.5;
    document.getElementById('oilType').value = localStorage.getItem('oilType') || '95';
}

function saveSettings() {
    localStorage.setItem('fuelRate', document.getElementById('settingFuelRate').value);
    localStorage.setItem('maintCost', document.getElementById('settingMaint').value);
    localStorage.setItem('oilType', document.getElementById('oilType').value);
    document.getElementById('settingsPanel').classList.add('hidden');
    // è¨­å®šè®Šæ›´ä¸æ‡‰å½±éŸ¿èˆŠç´€éŒ„ï¼Œé™¤éèˆŠç´€éŒ„æ²’æœ‰é–å®šæ²¹åƒ¹ï¼Œæ‰€ä»¥é€™è£¡åªå–®ç´”åˆ·æ–°
    refreshDashboard();
}

function toggleSettings() {
    document.getElementById('settingsPanel').classList.toggle('hidden');
}

async function fetchOilPrice() {
    const display = document.getElementById('oilPriceDisplay');
    try {
        const type = document.getElementById('oilType').value;
        const res = await fetch(workerAPI);
        const data = await res.json();
        if (data[type]) {
            globalOilPrice = parseFloat(data[type]);
            display.innerText = `$${globalOilPrice}`;
            display.dataset.price = globalOilPrice;
        }
    } catch (e) {
        display.innerText = `$${globalOilPrice} (é è¨­)`;
    }
}

// === è³‡æ–™å­˜å– ===
function getHistory() {
    try { return JSON.parse(localStorage.getItem('uber_history_v6') || '[]'); } catch { return []; }
}
function saveToHistory(data) {
    localStorage.setItem('uber_history_v6', JSON.stringify(data));
}

// === æ ¸å¿ƒï¼šå„²å­˜èˆ‡ç·¨è¼¯ ===
function saveRecord() {
    const date = document.getElementById('inputDate').value;
    const income = parseFloat(document.getElementById('inputIncome').value);
    const orders = parseFloat(document.getElementById('inputOrders').value);
    const km = parseFloat(document.getElementById('inputDist').value);
    const hr = parseFloat(document.getElementById('inputHr').value) || 0;
    const min = parseFloat(document.getElementById('inputMin').value) || 0;
    const editId = document.getElementById('editId').value;
    
    // éš±è—æ¬„ä½ï¼šè‹¥ç·¨è¼¯ä¸­ï¼Œé€™è£¡æœƒæœ‰èˆŠæ²¹åƒ¹ï¼›è‹¥æ–°å¢ï¼Œé€™è£¡æ˜¯ç©ºå€¼
    let lockedOilPrice = document.getElementById('recordOilPrice').value;

    if (!date) return alert('è«‹é¸æ“‡æ—¥æœŸ');
    if (isNaN(income) || isNaN(km)) return alert('è«‹å¡«å¯«å®Œæ•´æ•¸æ“š');

    // **é—œéµé‚è¼¯ï¼šæ²¹åƒ¹é–å®š**
    // å¦‚æœæ˜¯æ–°å¢æ¨¡å¼(lockedOilPriceç‚ºç©º)ï¼Œä½¿ç”¨ç•¶å‰å…¨åŸŸæ²¹åƒ¹ã€‚
    // å¦‚æœæ˜¯ç·¨è¼¯æ¨¡å¼ï¼Œä¿ç•™åŸæœ¬ lockedOilPriceï¼Œé™¤éä½¿ç”¨è€…æƒ³æ”¹(é€™è£¡æš«ä¸æä¾›æ”¹æ²¹åƒ¹ä»‹é¢ä»¥ä¿æŒç°¡å–®)ã€‚
    let finalOilPrice;
    if (editId && lockedOilPrice) {
        finalOilPrice = parseFloat(lockedOilPrice); 
    } else {
        finalOilPrice = globalOilPrice; // æ–°å¢æ™‚é–å®šç•¶ä¸‹æ²¹åƒ¹
    }

    const list = getHistory();
    const record = {
        id: editId ? parseInt(editId) : Date.now(),
        date: date,
        income: income,
        orders: orders || 0,
        km: km,
        hours: hr + (min/60),
        // **æ°¸ä¹…å„²å­˜è©²ç­†ç´€éŒ„çš„æˆæœ¬åƒæ•¸**
        oilPrice: finalOilPrice, 
        fuelRate: parseFloat(document.getElementById('settingFuelRate').value),
        maintCost: parseFloat(document.getElementById('settingMaint').value)
    };

    if (editId) {
        const idx = list.findIndex(r => r.id == editId);
        if(idx !== -1) list[idx] = record;
        alert('ç´€éŒ„å·²æ›´æ–°');
    } else {
        list.push(record);
        // å¦‚æœæ–°å¢çš„æ—¥æœŸæ˜¯ä»Šå¤©ï¼Œåˆ‡æ›åˆ°ä»Šå¤©è¦–åœ–
        if(date === getLocalDateString()) {
            currentFilter = 'day';
            updateTabs();
        }
    }

    list.sort((a, b) => new Date(b.date) - new Date(a.date));
    saveToHistory(list);
    resetEditor();
    refreshDashboard();
}

function loadRecordToEditor(id) {
    const list = getHistory();
    const r = list.find(item => item.id === id);
    if (!r) return;

    // å¡«å…¥æ•¸æ“š
    document.getElementById('editId').value = r.id;
    document.getElementById('inputDate').value = r.date;
    document.getElementById('inputIncome').value = r.income;
    document.getElementById('inputOrders').value = r.orders;
    document.getElementById('inputDist').value = r.km;
    
    const h = Math.floor(r.hours);
    const m = Math.round((r.hours - h) * 60);
    document.getElementById('inputHr').value = h;
    document.getElementById('inputMin').value = m;

    // **å¡«å…¥æ²¹åƒ¹é–å®šè³‡è¨Š**
    document.getElementById('recordOilPrice').value = r.oilPrice || globalOilPrice; 
    // é¡¯ç¤ºæç¤º
    const hint = document.getElementById('editorOilHint');
    hint.classList.remove('hidden');
    hint.innerText = `ä»¥ç•¶æ™‚æ²¹åƒ¹ $${r.oilPrice || globalOilPrice} è¨ˆç®—`;

    // UI è®Šæ›´
    document.getElementById('editorTitle').innerText = "ç·¨è¼¯æ¨¡å¼";
    document.getElementById('editorModeIcon').innerText = "âœï¸";
    document.getElementById('editorCard').classList.add('border-orange-500'); // è¦–è¦ºæç¤º
    document.getElementById('btnSave').innerHTML = "<span>ğŸ”„ ç¢ºèªä¿®æ”¹</span>";
    
    document.getElementById('btnDelete').classList.remove('hidden');
    document.getElementById('btnCancel').classList.remove('hidden');

    // æ»¾å‹•åˆ°ç·¨è¼¯å€
    document.getElementById('editorCard').scrollIntoView({ behavior: 'smooth', block: 'center' });
}

function deleteCurrentRecord() {
    if(!confirm('ç¢ºå®šè¦æ°¸ä¹…åˆªé™¤æ­¤ç´€éŒ„å—ï¼Ÿ')) return;
    const id = document.getElementById('editId').value;
    const list = getHistory();
    const newList = list.filter(r => r.id != id);
    saveToHistory(newList);
    resetEditor();
    refreshDashboard();
}

function resetEditor() {
    document.getElementById('editId').value = "";
    document.getElementById('recordOilPrice').value = "";
    document.getElementById('inputDate').value = getLocalDateString();
    document.getElementById('inputIncome').value = "";
    document.getElementById('inputOrders').value = "";
    document.getElementById('inputDist').value = "";
    document.getElementById('inputHr').value = "";
    document.getElementById('inputMin').value = "";

    document.getElementById('editorTitle').innerText = "æ–°å¢ç´€éŒ„";
    document.getElementById('editorModeIcon').innerText = "ğŸ“";
    document.getElementById('editorOilHint').classList.add('hidden');
    document.getElementById('editorCard').classList.remove('border-orange-500');
    
    document.getElementById('btnSave').innerHTML = "<span>ğŸ’¾ å„²å­˜ç´€éŒ„</span>";
    document.getElementById('btnDelete').classList.add('hidden');
    document.getElementById('btnCancel').classList.add('hidden');
}

// === ç¯©é¸èˆ‡é¡¯ç¤º ===
function setFilter(type, btn) {
    currentFilter = type;
    updateTabs(btn);
    refreshDashboard();
}

function updateTabs(targetBtn) {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    if(targetBtn) targetBtn.classList.add('active');
    else {
        // è‡ªå‹• highlight
        const map = {'day':0, 'week':1, 'month':2, 'all':3};
        const btns = document.querySelectorAll('.tab-btn');
        if(btns[map[currentFilter]]) btns[map[currentFilter]].classList.add('active');
    }
}

function getFilteredData() {
    const list = getHistory();
    const today = getLocalDateString();
    
    if (currentFilter === 'day') return list.filter(r => r.date === today);
    if (currentFilter === 'week') {
        const d = new Date();
        d.setDate(d.getDate() - 7);
        const weekAgo = d.toISOString().split('T')[0];
        return list.filter(r => r.date >= weekAgo);
    }
    if (currentFilter === 'month') return list.filter(r => r.date.startsWith(today.slice(0, 7)));
    return list;
}

function refreshDashboard() {
    const data = getFilteredData();
    const listDiv = document.getElementById('historyList');
    
    let tInc = 0, tNet = 0, tOrders = 0, tHr = 0;
    let html = '';

    if (data.length === 0) {
        html = `<div class="text-center text-gray-600 py-8 text-sm">æ­¤å€é–“å°šç„¡è³‡æ–™</div>`;
    } else {
        data.forEach(r => {
            // è¨ˆç®—é‚è¼¯ï¼šå„ªå…ˆä½¿ç”¨ç´€éŒ„å…§çš„ oilPriceï¼Œè‹¥ç„¡(èˆŠè³‡æ–™)å‰‡ç”¨å…¨åŸŸ
            const price = (r.oilPrice !== undefined) ? r.oilPrice : globalOilPrice;
            const rate = (r.fuelRate !== undefined) ? r.fuelRate : 12;
            const maint = (r.maintCost !== undefined) ? r.maintCost : 1.5;

            const cost = (r.km / rate) * price + (r.km * maint);
            const net = r.income - cost;

            tInc += r.income;
            tNet += net;
            tOrders += r.orders;
            tHr += r.hours;

            // åˆ—è¡¨ HTML
            html += `
            <div class="history-item" onclick="loadRecordToEditor(${r.id})">
                <div>
                    <div class="text-gray-500 text-xs font-mono mb-1">${r.date}</div>
                    <div class="text-white font-bold text-lg">$${r.income}</div>
                </div>
                <div class="text-right">
                    <div class="text-green-400 font-bold text-sm">æ·¨ $${Math.round(net)}</div>
                    <div class="text-gray-600 text-xs mt-1">
                         ${r.km}km / ${r.orders}å–®
                    </div>
                </div>
            </div>`;
        });
    }

    listDiv.innerHTML = html;

    // æ›´æ–°å„€è¡¨æ¿
    document.getElementById('dashTotalIncome').innerText = Math.round(tInc).toLocaleString();
    document.getElementById('dashNetProfit').innerText = Math.round(tNet).toLocaleString();
    document.getElementById('dashOrders').innerText = tOrders;
    
    const realHourly = tHr > 0 ? Math.round(tNet / tHr) : 0;
    document.getElementById('dashRealHourly').innerText = realHourly;

    const h = Math.floor(tHr);
    const m = Math.round((tHr - h) * 60);
    document.getElementById('dashHours').innerText = h;
    document.getElementById('dashMinutes').innerText = m;

    // æ›´æ–°åœ–è¡¨
    if(!document.getElementById('chartsPanel').classList.contains('hidden')) {
        updateChart(data);
    }
}

// === åœ–è¡¨ ===
function toggleCharts() {
    const p = document.getElementById('chartsPanel');
    p.classList.toggle('hidden');
    if(!p.classList.contains('hidden')) updateChart(getFilteredData());
}

function updateChart(data) {
    const sorted = [...data].sort((a, b) => new Date(a.date) - new Date(b.date));
    const labels = sorted.map(r => r.date.slice(5));
    const incomes = sorted.map(r => r.income);
    const nets = sorted.map(r => {
        const p = r.oilPrice || globalOilPrice;
        const cost = (r.km / (r.fuelRate||12)) * p + (r.km * (r.maintCost||1.5));
        return r.income - cost;
    });

    const ctx = document.getElementById('mainChart').getContext('2d');
    if (chartInstance) chartInstance.destroy();

    chartInstance = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                { label: 'ç‡Ÿæ”¶', data: incomes, backgroundColor: '#6366f1', borderRadius: 4 },
                { label: 'æ·¨åˆ©', data: nets, type: 'line', borderColor: '#34d399', borderWidth: 2, tension: 0.3 }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { labels: { color: '#9ca3af' } } },
            scales: {
                x: { ticks: { color: '#6b7280' }, grid: { color: '#333' } },
                y: { ticks: { color: '#6b7280' }, grid: { color: '#333' } }
            }
        }
    });
}
</script>
</body>
</html>
